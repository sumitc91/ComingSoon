<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fraction Addition and Subtraction - LeetCodee Solution</title>
    <meta name="description" content="Learn how to solve the LeetCode Fraction Addition and Subtraction problem with detailed explanations and code solutions in Python, Java, C++, JavaScript, and C#.">
    <meta name="keywords" content="leetcode, fraction addition and subtraction, algorithm, solution, python, java, c++, javascript, c#, coding, programming, tutorial">
    <meta property="og:title" content="Fraction Addition and Subtraction - LeetCodee Solution">
    <meta property="og:description" content="Learn how to solve the LeetCode Fraction Addition and Subtraction problem with detailed explanations and code solutions in Python, Java, C++, JavaScript, and C#.">
    <meta property="og:url" content="https://leetcodee.com/problems/fraction-addition-and-subtraction/">
    <meta property="og:type" content="article">
    <link rel="canonical" href="https://leetcodee.com/problems/fraction-addition-and-subtraction/">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F7SQYSXXMM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-F7SQYSXXMM');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1068871795581451" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-100">
    <header class="bg-gray-800 text-white p-4">
        <div class="container mx-auto">
            <a href="/" class="text-xl font-bold">LeetCodee</a>
        </div>
    </header>

    <main class="container mx-auto p-4">
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold mb-4">592. Fraction Addition and Subtraction</h1>

            <div class="solution-nav mb-6">
                Jump to Solution:
                <a href="#python" class="ml-2 text-blue-600 hover:text-blue-800">Python</a>
                <a href="#java" class="ml-2 text-blue-600 hover:text-blue-800">Java</a>
                <a href="#cpp" class="ml-2 text-blue-600 hover:text-blue-800">C++</a>
                <a href="#javascript" class="ml-2 text-blue-600 hover:text-blue-800">JavaScript</a>
                <a href="#csharp" class="ml-2 text-blue-600 hover:text-blue-800">C#</a>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Problem Description</h2>
                <p class="text-gray-700 mb-4">
                    Given a string <code class="bg-gray-100 px-1 rounded">expression</code> representing an expression of fraction addition and subtraction, return the calculation result in string format.
                </p>
                <p class="text-gray-700 mb-4">
                    The final result should be an irreducible fraction. If your final result is an integer, change it to the format of a fraction that has a denominator <code class="bg-gray-100 px-1 rounded">1</code>. So in this case, <code class="bg-gray-100 px-1 rounded">2</code> should be converted to <code class="bg-gray-100 px-1 rounded">2/1</code>.
                </p>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Example 1:</h2>
                <pre class="bg-gray-100 p-4 rounded"><code>Input: expression = "-1/2+1/2"
Output: "0/1"</code></pre>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Example 2:</h2>
                <pre class="bg-gray-100 p-4 rounded"><code>Input: expression = "-1/2+1/2+1/3"
Output: "1/3"</code></pre>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Example 3:</h2>
                <pre class="bg-gray-100 p-4 rounded"><code>Input: expression = "1/3-1/2"
Output: "-1/6"</code></pre>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Constraints:</h2>
                <ul class="list-disc list-inside text-gray-700">
                    <li>The input string only contains <code class="bg-gray-100 px-1 rounded">'0'</code> to <code class="bg-gray-100 px-1 rounded">'9'</code>, <code class="bg-gray-100 px-1 rounded">'/'</code>, <code class="bg-gray-100 px-1 rounded">'+'</code> and <code class="bg-gray-100 px-1 rounded">'-'</code>. So does the output.</li>
                    <li>Each fraction (input and output) has the format <code class="bg-gray-100 px-1 rounded">±numerator/denominator</code>.</li>
                    <li>If the first input fraction or the output is positive, then <code class="bg-gray-100 px-1 rounded">'+'</code> will be omitted.</li>
                    <li>The input only contains valid irreducible fractions, where the numerator and denominator of each fraction will always be in the range <code class="bg-gray-100 px-1 rounded">[1, 10]</code>.</li>
                    <li>If the denominator is <code class="bg-gray-100 px-1 rounded">1</code>, it means this fraction is actually an integer in a fraction format defined above.</li>
                    <li>The number of given fractions will be in the range <code class="bg-gray-100 px-1 rounded">[1, 10]</code>.</li>
                    <li>The numerator and denominator of the final result are guaranteed to be valid and in the range of 32-bit int.</li>
                </ul>
            </div>
        </div>

        <!-- Solution Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">Solution</h2>
            
            <!-- Python Solution -->
            <div id="python" class="mb-8">
                <h3 class="text-xl font-semibold mb-4">Python Solution</h3>
                <pre class="language-python"><code>class Solution:
    def fractionAddition(self, expression: str) -> str:
        def gcd(a: int, b: int) -> int:
            return gcd(b, a % b) if b else abs(a)
        
        def lcm(a: int, b: int) -> int:
            return abs(a * b) // gcd(a, b)
        
        if expression[0] != '-':
            expression = '+' + expression
            
        nums = []
        dens = []
        i = 0
        while i < len(expression):
            sign = 1 if expression[i] == '+' else -1
            i += 1
            j = i
            while j < len(expression) and expression[j] != '/':
                j += 1
            num = int(expression[i:j]) * sign
            i = j + 1
            j = i
            while j < len(expression) and expression[j] not in '+-':
                j += 1
            den = int(expression[i:j])
            nums.append(num)
            dens.append(den)
            i = j
            
        lcm_den = dens[0]
        for i in range(1, len(dens)):
            lcm_den = lcm(lcm_den, dens[i])
            
        num_sum = 0
        for i in range(len(nums)):
            num_sum += nums[i] * (lcm_den // dens[i])
            
        if num_sum == 0:
            return "0/1"
            
        g = gcd(num_sum, lcm_den)
        return f"{num_sum // g}/{lcm_den // g}"</code></pre>
                
                <div class="mt-4">
                    <h4 class="text-lg font-semibold mb-2">Time Complexity: O(n)</h4>
                    <p class="text-gray-700">Where n is the length of the expression string.</p>
                    
                    <h4 class="text-lg font-semibold mb-2 mt-4">Space Complexity: O(n)</h4>
                    <p class="text-gray-700">For storing the numerators and denominators.</p>
                </div>
            </div>

            <!-- Java Solution -->
            <div id="java" class="mb-8">
                <h3 class="text-xl font-semibold mb-4">Java Solution</h3>
                <pre class="language-java"><code>class Solution {
    private int gcd(int a, int b) {
        return b == 0 ? Math.abs(a) : gcd(b, a % b);
    }
    
    private int lcm(int a, int b) {
        return Math.abs(a * b) / gcd(a, b);
    }
    
    public String fractionAddition(String expression) {
        if (expression.charAt(0) != '-') {
            expression = "+" + expression;
        }
        
        List<Integer> nums = new ArrayList<>();
        List<Integer> dens = new ArrayList<>();
        int i = 0;
        while (i < expression.length()) {
            int sign = expression.charAt(i) == '+' ? 1 : -1;
            i++;
            int j = i;
            while (j < expression.length() && expression.charAt(j) != '/') {
                j++;
            }
            int num = Integer.parseInt(expression.substring(i, j)) * sign;
            i = j + 1;
            j = i;
            while (j < expression.length() && !isOperator(expression.charAt(j))) {
                j++;
            }
            int den = Integer.parseInt(expression.substring(i, j));
            nums.add(num);
            dens.add(den);
            i = j;
        }
        
        int lcmDen = dens.get(0);
        for (int k = 1; k < dens.size(); k++) {
            lcmDen = lcm(lcmDen, dens.get(k));
        }
        
        int numSum = 0;
        for (int k = 0; k < nums.size(); k++) {
            numSum += nums.get(k) * (lcmDen / dens.get(k));
        }
        
        if (numSum == 0) {
            return "0/1";
        }
        
        int g = gcd(numSum, lcmDen);
        return (numSum / g) + "/" + (lcmDen / g);
    }
    
    private boolean isOperator(char c) {
        return c == '+' || c == '-';
    }
}</code></pre>
                
                <div class="mt-4">
                    <h4 class="text-lg font-semibold mb-2">Time Complexity: O(n)</h4>
                    <p class="text-gray-700">Where n is the length of the expression string.</p>
                    
                    <h4 class="text-lg font-semibold mb-2 mt-4">Space Complexity: O(n)</h4>
                    <p class="text-gray-700">For storing the numerators and denominators.</p>
                </div>
            </div>

            <!-- C++ Solution -->
            <div id="cpp" class="mb-8">
                <h3 class="text-xl font-semibold mb-4">C++ Solution</h3>
                <pre class="language-cpp"><code>class Solution {
private:
    int gcd(int a, int b) {
        return b == 0 ? abs(a) : gcd(b, a % b);
    }
    
    int lcm(int a, int b) {
        return abs(a * b) / gcd(a, b);
    }
    
public:
    string fractionAddition(string expression) {
        if (expression[0] != '-') {
            expression = "+" + expression;
        }
        
        vector<int> nums;
        vector<int> dens;
        int i = 0;
        while (i < expression.length()) {
            int sign = expression[i] == '+' ? 1 : -1;
            i++;
            int j = i;
            while (j < expression.length() && expression[j] != '/') {
                j++;
            }
            int num = stoi(expression.substr(i, j - i)) * sign;
            i = j + 1;
            j = i;
            while (j < expression.length() && expression[j] != '+' && expression[j] != '-') {
                j++;
            }
            int den = stoi(expression.substr(i, j - i));
            nums.push_back(num);
            dens.push_back(den);
            i = j;
        }
        
        int lcm_den = dens[0];
        for (int k = 1; k < dens.size(); k++) {
            lcm_den = lcm(lcm_den, dens[k]);
        }
        
        int num_sum = 0;
        for (int k = 0; k < nums.size(); k++) {
            num_sum += nums[k] * (lcm_den / dens[k]);
        }
        
        if (num_sum == 0) {
            return "0/1";
        }
        
        int g = gcd(num_sum, lcm_den);
        return to_string(num_sum / g) + "/" + to_string(lcm_den / g);
    }
};</code></pre>
                
                <div class="mt-4">
                    <h4 class="text-lg font-semibold mb-2">Time Complexity: O(n)</h4>
                    <p class="text-gray-700">Where n is the length of the expression string.</p>
                    
                    <h4 class="text-lg font-semibold mb-2 mt-4">Space Complexity: O(n)</h4>
                    <p class="text-gray-700">For storing the numerators and denominators.</p>
                </div>
            </div>

            <!-- JavaScript Solution -->
            <div id="javascript" class="mb-8">
                <h3 class="text-xl font-semibold mb-4">JavaScript Solution</h3>
                <pre class="language-javascript"><code>/**
 * @param {string} expression
 * @return {string}
 */
var fractionAddition = function(expression) {
    const gcd = (a, b) => b === 0 ? Math.abs(a) : gcd(b, a % b);
    const lcm = (a, b) => Math.abs(a * b) / gcd(a, b);
    
    if (expression[0] !== '-') {
        expression = '+' + expression;
    }
    
    const nums = [];
    const dens = [];
    let i = 0;
    while (i < expression.length) {
        const sign = expression[i] === '+' ? 1 : -1;
        i++;
        let j = i;
        while (j < expression.length && expression[j] !== '/') {
            j++;
        }
        const num = parseInt(expression.slice(i, j)) * sign;
        i = j + 1;
        j = i;
        while (j < expression.length && expression[j] !== '+' && expression[j] !== '-') {
            j++;
        }
        const den = parseInt(expression.slice(i, j));
        nums.push(num);
        dens.push(den);
        i = j;
    }
    
    let lcmDen = dens[0];
    for (let k = 1; k < dens.length; k++) {
        lcmDen = lcm(lcmDen, dens[k]);
    }
    
    let numSum = 0;
    for (let k = 0; k < nums.length; k++) {
        numSum += nums[k] * (lcmDen / dens[k]);
    }
    
    if (numSum === 0) {
        return "0/1";
    }
    
    const g = gcd(numSum, lcmDen);
    return `${numSum / g}/${lcmDen / g}`;
};</code></pre>
                
                <div class="mt-4">
                    <h4 class="text-lg font-semibold mb-2">Time Complexity: O(n)</h4>
                    <p class="text-gray-700">Where n is the length of the expression string.</p>
                    
                    <h4 class="text-lg font-semibold mb-2 mt-4">Space Complexity: O(n)</h4>
                    <p class="text-gray-700">For storing the numerators and denominators.</p>
                </div>
            </div>

            <!-- C# Solution -->
            <div id="csharp" class="mb-8">
                <h3 class="text-xl font-semibold mb-4">C# Solution</h3>
                <pre class="language-csharp"><code>public class Solution {
    private int Gcd(int a, int b) {
        return b == 0 ? Math.Abs(a) : Gcd(b, a % b);
    }
    
    private int Lcm(int a, int b) {
        return Math.Abs(a * b) / Gcd(a, b);
    }
    
    public string FractionAddition(string expression) {
        if (expression[0] != '-') {
            expression = "+" + expression;
        }
        
        var nums = new List<int>();
        var dens = new List<int>();
        int i = 0;
        while (i < expression.Length) {
            int sign = expression[i] == '+' ? 1 : -1;
            i++;
            int j = i;
            while (j < expression.Length && expression[j] != '/') {
                j++;
            }
            int num = int.Parse(expression.Substring(i, j - i)) * sign;
            i = j + 1;
            j = i;
            while (j < expression.Length && expression[j] != '+' && expression[j] != '-') {
                j++;
            }
            int den = int.Parse(expression.Substring(i, j - i));
            nums.Add(num);
            dens.Add(den);
            i = j;
        }
        
        int lcmDen = dens[0];
        for (int k = 1; k < dens.Count; k++) {
            lcmDen = Lcm(lcmDen, dens[k]);
        }
        
        int numSum = 0;
        for (int k = 0; k < nums.Count; k++) {
            numSum += nums[k] * (lcmDen / dens[k]);
        }
        
        if (numSum == 0) {
            return "0/1";
        }
        
        int g = Gcd(numSum, lcmDen);
        return $"{numSum / g}/{lcmDen / g}";
    }
}</code></pre>
                
                <div class="mt-4">
                    <h4 class="text-lg font-semibold mb-2">Time Complexity: O(n)</h4>
                    <p class="text-gray-700">Where n is the length of the expression string.</p>
                    
                    <h4 class="text-lg font-semibold mb-2 mt-4">Space Complexity: O(n)</h4>
                    <p class="text-gray-700">For storing the numerators and denominators.</p>
                </div>
            </div>
        </div>

        <!-- Approach Explanation -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Approach Explanation</h2>
            
            <div class="space-y-4">
                <p class="text-gray-700">
                    The solution uses fraction arithmetic and string parsing:
                </p>
                
                <ol class="list-decimal list-inside text-gray-700 ml-4">
                    <li>Key Insights:
                        <ul class="list-disc list-inside ml-8">
                            <li>Fraction arithmetic</li>
                            <li>GCD and LCM</li>
                            <li>String parsing</li>
                            <li>Fraction reduction</li>
                        </ul>
                    </li>
                    <li>Algorithm Steps:
                        <ul class="list-disc list-inside ml-8">
                            <li>Parse fractions</li>
                            <li>Find common denominator</li>
                            <li>Add numerators</li>
                            <li>Reduce result</li>
                        </ul>
                    </li>
                </ol>

                <p class="text-gray-700 mt-4">
                    Implementation Details:
                    <ul class="list-disc list-inside ml-4">
                        <li>String manipulation</li>
                        <li>Number parsing</li>
                        <li>Fraction operations</li>
                        <li>Result formatting</li>
                    </ul>
                </p>

                <p class="text-gray-700 mt-4">
                    Optimization Insights:
                    <ul class="list-disc list-inside ml-4">
                        <li>Early return</li>
                        <li>Efficient GCD</li>
                        <li>Memory usage</li>
                        <li>String operations</li>
                    </ul>
                </p>

                <p class="text-gray-700 mt-4">
                    Edge Cases:
                    <ul class="list-disc list-inside ml-4">
                        <li>Zero result</li>
                        <li>Negative fractions</li>
                        <li>Single fraction</li>
                        <li>Integer result</li>
                    </ul>
                </p>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 mt-8">
        <div class="container mx-auto text-center">
            <p>© 2024 LeetCodee. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "592. Fraction Addition and Subtraction",
      "author": {
        "@type": "Person",
        "name": "LeetCodee"
      },
      "datePublished": "2024-03-08",
      "description": "Learn how to solve the LeetCode Fraction Addition and Subtraction problem with detailed explanations and code solutions in Python, Java, C++, JavaScript, and C#.",
      "articleBody": "Given a string expression representing an expression of fraction addition and subtraction, return the calculation result in string format. The final result should be an irreducible fraction. If your final result is an integer, change it to the format of a fraction that has a denominator 1. So in this case, 2 should be converted to 2/1.  Detailed solutions with explanations are provided below."
    }
    </script>
</body>
</html>